.. _animationflowcontrol:

AnimationFlowControl
^^^^^^^^^^^^^^^^^^^^

Source file: `animation.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/animation.proto>`_

ANIMATION_FLOW_CONTROL
Used for informing the backend of which frames have been received

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - 
   * - received_frame
     - :carta:`AnimationFrame`
     - 
     - The latest flow control frame received
   * - animation_id
     - sfixed32
     - 
     - The animation ID that the flow control message belongs to
   * - timestamp
     - sfixed64
     - 
     - Timestamp at which the frame was received

.. _matchedframelist:

MatchedFrameList
^^^^^^^^^^^^^^^^

Source file: `animation.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/animation.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - frame_numbers
     - float
     - repeated
     - 

.. _startanimation:

StartAnimation
^^^^^^^^^^^^^^

Source file: `animation.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/animation.proto>`_

START_ANIMATION:
Starts an animation, as defined by the start, stop and step definitions.
Backend responds with :carta:`START_ANIMATION_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the animation describes.
   * - first_frame
     - :carta:`AnimationFrame`
     - 
     - The lower bound of the animation when looping.
   * - start_frame
     - :carta:`AnimationFrame`
     - 
     - The starting point of the animation.
   * - last_frame
     - :carta:`AnimationFrame`
     - 
     - The upper bound of the animation.
   * - delta_frame
     - :carta:`AnimationFrame`
     - 
     - The frame change step for the animation. For example, a delta frame of {channel=1, stokes=0} would step through each channel in the file.
   * - frame_rate
     - sfixed32
     - 
     - Frame rate per second
   * - looping
     - bool
     - 
     - Whether to loop the animation indefinitely.
   * - reverse
     - bool
     - 
     - Whether to reverse the animation direction when endFrame is reached.
   * - required_tiles
     - :carta:`AddRequiredTiles`
     - 
     - Required tiles when changing channels
   * - matched_frames
     - map<key: sfixed32, value: :carta:`MatchedFrameList`>
     - repeated
     - 

.. _startanimationack:

StartAnimationAck
^^^^^^^^^^^^^^^^^

Source file: `animation.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/animation.proto>`_

START_ANIMATION_ACK
Response for :carta:`START_ANIMATION`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`START_ANIMATION` was successful
   * - message
     - string
     - 
     - Error message (if applicable)
   * - animation_id
     - sfixed32
     - 
     - The animation ID of the new animation

.. _stopanimation:

StopAnimation
^^^^^^^^^^^^^

Source file: `animation.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/animation.proto>`_

STOP_ANIMATION
Stops the playing animation

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the animation describes.
   * - end_frame
     - :carta:`AnimationFrame`
     - 
     - The ending point of the animation.

.. _closefile:

CloseFile
^^^^^^^^^

Source file: `close_file.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/close_file.proto>`_

CLOSE_FILE:
Instructs the backend to close a file with a given file ID

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which "file" slot to close

.. _setcontourparameters:

SetContourParameters
^^^^^^^^^^^^^^^^^^^^

Source file: `contour.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/contour.proto>`_

SET_CONTOUR_PARAMETERS
Sets the contour parameters for a file

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - fixed32
     - 
     - The file ID that the contour corresponds to
   * - reference_file_id
     - fixed32
     - 
     - The file ID of the reference image that the contour vertices should be mapped to
   * - image_bounds
     - :carta:`ImageBounds`
     - 
     - The XY bounds corresponding to the image data in pixel coordinates
   * - levels
     - double
     - repeated
     - Contour levels
   * - smoothing_mode
     - SmoothingMode
     - 
     - Pre-contouring smoothing mode
   * - smoothing_factor
     - int32
     - 
     - Contour smoothness factor. For block averaging, this is the block width For Gaussian smoothing, this defines both the Gaussian width, and the kernel size
   * - decimation_factor
     - int32
     - 
     - Decimation factor, indicates to what 1/Nth of a pixel the contour vertices should be rounded to
   * - compression_level
     - int32
     - 
     - Zstd compression level
   * - contour_chunk_size
     - int32
     - 
     - Size of contour chunks, in number of vertices. If this is set to zero, partial contour results are not used

.. _exportregion:

ExportRegion
^^^^^^^^^^^^

Source file: `export_region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/export_region.proto>`_

EXPORT_REGION:
Requests exporting the specified regions to a file on the server.
If directory and file are blank, return file contents for export on client.
Backend responds with  :carta:`EXPORT_REGION_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - type
     - FileType
     - 
     - Required file type
   * - coord_type
     - CoordinateType
     - 
     - Required coordinate type pixel/world
   * - file_id
     - sfixed32
     - 
     - File id for the coordinate system to use
   * - region_styles
     - map<key: sfixed32, value: :carta:`RegionStyle`>
     - repeated
     - Region ids and style params to export
   * - directory
     - string
     - 
     - Optional directory name of server file
   * - file
     - string
     - 
     - Optional file name of server file

.. _exportregionack:

ExportRegionAck
^^^^^^^^^^^^^^^

Source file: `export_region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/export_region.proto>`_

EXPORT_REGION_ACK
Response for :carta:`EXPORT_REGION` to indicate success and file contents if on client.

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`EXPORT_REGION` was successful
   * - message
     - string
     - 
     - Error message (if applicable)
   * - contents
     - string
     - repeated
     - File contents for client export (one line per string)

.. _importregion:

ImportRegion
^^^^^^^^^^^^

Source file: `import_region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/import_region.proto>`_

IMPORT_REGION:
Requests the opening and applying of a specific region file.
Backend responds with  :carta:`IMPORT_REGION_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - group_id
     - sfixed32
     - 
     - Required WCS group id (may be a single file id)
   * - type
     - FileType
     - 
     - Required file type
   * - directory
     - string
     - 
     - Optional directory name of server file
   * - file
     - string
     - 
     - Optional file name of server file
   * - contents
     - string
     - repeated
     - Optional file contents of client file (1 line per string)

.. _importregionack:

ImportRegionAck
^^^^^^^^^^^^^^^

Source file: `import_region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/import_region.proto>`_

IMPORT_REGION_ACK
Response for :carta:`IMPORT_REGION`. Also supplies region properties

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`IMPORT_REGION` was successful
   * - message
     - string
     - 
     - Error message (if applicable)
   * - regions
     - map<key: sfixed32, value: :carta:`RegionInfo`>
     - repeated
     - Map region id to parameters
   * - region_styles
     - map<key: sfixed32, value: :carta:`RegionStyle`>
     - repeated
     - Map region id to style parameters

.. _closecatalogfile:

CloseCatalogFile
^^^^^^^^^^^^^^^^

Source file: `open_catalog_file.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/open_catalog_file.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - 

.. _opencatalogfile:

OpenCatalogFile
^^^^^^^^^^^^^^^

Source file: `open_catalog_file.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/open_catalog_file.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - directory
     - string
     - 
     - 
   * - name
     - string
     - 
     - 
   * - file_id
     - sfixed32
     - 
     - 
   * - preview_data_size
     - sfixed32
     - 
     - 

.. _opencatalogfileack:

OpenCatalogFileAck
^^^^^^^^^^^^^^^^^^

Source file: `open_catalog_file.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/open_catalog_file.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - 
   * - message
     - string
     - 
     - 
   * - file_id
     - sfixed32
     - 
     - 
   * - file_info
     - :carta:`CatalogFileInfo`
     - 
     - 
   * - data_size
     - sfixed32
     - 
     - 
   * - headers
     - :carta:`CatalogHeader`
     - repeated
     - 
   * - preview_data
     - map<key: fixed32, value: :carta:`ColumnData`>
     - repeated
     - 

.. _openfile:

OpenFile
^^^^^^^^

Source file: `open_file.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/open_file.proto>`_

OPEN_FILE:
Requests the opening of a specific file.
Backend responds with  :carta:`OPEN_FILE_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - directory
     - string
     - 
     - Required directory name
   * - file
     - string
     - 
     - Required file name
   * - hdu
     - string
     - 
     - Which HDU to load (if applicable). If left blank, the first HDU will be used
   * - file_id
     - sfixed32
     - 
     - Which "file" slot to load the file into (when viewing multiple files)
   * - render_mode
     - RenderMode
     - 
     - The render mode to use. Additional modes will be added in subsequent versions.

.. _openfileack:

OpenFileAck
^^^^^^^^^^^

Source file: `open_file.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/open_file.proto>`_

OPEN_FILE_ACK
Response for :carta:`OPEN_FILE`. Also supplies file information

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`OPEN_FILE` was successful
   * - file_id
     - sfixed32
     - 
     - Which file slot the file was loaded into (when viewing multiple files)
   * - message
     - string
     - 
     - Error message (if applicable)
   * - file_info
     - :carta:`FileInfo`
     - 
     - Basic file info (type, size)
   * - file_info_extended
     - :carta:`FileInfoExtended`
     - 
     - Extended file info (WCS, header info)
   * - file_feature_flags
     - fixed32
     - 
     - Optional bitflags specifying feature flags of the file being opened.

.. _removeregion:

RemoveRegion
^^^^^^^^^^^^

Source file: `region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region.proto>`_

REMOVE_REGION:
Removes a region

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - region_id
     - sfixed32
     - 
     - Unique region ID of the region to be removed

.. _setregion:

SetRegion
^^^^^^^^^

Source file: `region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region.proto>`_

SET_REGION:
Creates or updates a region. Backend responds with :carta:`SET_REGION_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - File slot of the reference image
   * - region_id
     - sfixed32
     - 
     - Unique region ID. <=0 if a new region is being created.
   * - region_info
     - :carta:`RegionInfo`
     - 
     - Region parameters

.. _setregionack:

SetRegionAck
^^^^^^^^^^^^

Source file: `region.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region.proto>`_

SET_REGION_ACK:
Response for :carta:`SET_REGION`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`SET_REGION` was successful
   * - message
     - string
     - 
     - Error message (if applicable)
   * - region_id
     - sfixed32
     - 
     - The unique region ID. If the region is updated, this will be the same as the region ID specified in :carta:`SET_REGION`. If  a new region is being created, the ID of the new region will be passed back.

.. _sethistogramrequirements:

SetHistogramRequirements
^^^^^^^^^^^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_

SET_HISTOGRAM_REQUIREMENTS:
Sets which histogram data needs to be streamed to the frontend when the region is updated

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the requirements describe
   * - region_id
     - sfixed32
     - 
     - ID of the region that is having requirements defined. If a region ID of -1 is given, this corresponds to the entire 2D image.
   * - histograms
     - :carta:`HistogramConfig`
     - repeated
     - List of required histograms, along with the number of bins. If the channel is -1, the current channel is used. If the channel is -2, the histogram is constructed over all channels. If the number of bins is less than zero, an automatic bin size is used, based on the number of values.

.. _histogramconfig:

HistogramConfig
^^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - channel
     - sfixed32
     - 
     - 
   * - num_bins
     - sfixed32
     - 
     - 

.. _setregionrequirements:

SetRegionRequirements
^^^^^^^^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_

SET_REGION_REQUIREMENTS:
Sets which spatial profile data needs to be streamed to the frontend when the region is updated

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - fixed32
     - 
     - 
   * - region_id
     - fixed32
     - 
     - ID of the region that is having requirements defined. If a region ID of 0 is given, this corresponds to the point region defined by the cursor position.
   * - x
     - bool
     - 
     - Is the X-profile (of the current Stokes parameter) required?
   * - y
     - bool
     - 
     - Is the Y-profile (of the current Stokes parameter) required?
   * - z
     - bool
     - 
     - Is the Z-profile (of the current Stokes parameter) required?
   * - additional_profiles
     - string
     - repeated
     - List of additional profiles needed (for example, [“Qz”, “Uz”]) will include the Z-profile of the Q and U Stokes cube, regardless of which Stokes parameter is currently in use.

.. _setspatialrequirements:

SetSpatialRequirements
^^^^^^^^^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_

SET_SPATIAL_REQUIREMENTS:
Sets which information needs to be streamed to the frontend when the region is updated

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the requirements describe
   * - region_id
     - sfixed32
     - 
     - ID of the region that is having requirements defined. If a region ID of 0 is given, this corresponds to the point region defined by the cursor position.
   * - spatial_profiles
     - string
     - repeated
     - List of spatial profiles needed. If no Stokes parameter is specified (i.e. just “x” or “y”), the active Stokes parameter is used.

.. _setspectralrequirements:

SetSpectralRequirements
^^^^^^^^^^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_

SET_SPECTRAL_REQUIREMENTS:
Sets which spectral profile data needs to be streamed to the frontend when the region is updated

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the requirements describe
   * - region_id
     - sfixed32
     - 
     - ID of the region that is having requirements defined. If a region ID of 0 is given, this corresponds to the point region defined by the cursor position.
   * - spectral_profiles
     - :carta:`SpectralConfig`
     - repeated
     - List of spectral profiles needed, along with which stats types are needed for each profile. If no Stokes parameter is specified (i.e. just “z”) or if the coordinate is empty, the active Stokes parameter is used. If the region is a point region, the statsTypes field is ignored.

.. _spectralconfig:

SpectralConfig
^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - coordinate
     - string
     - 
     - 
   * - stats_types
     - StatsType
     - repeated
     - 

.. _setstatsrequirements:

SetStatsRequirements
^^^^^^^^^^^^^^^^^^^^

Source file: `region_requirements.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/region_requirements.proto>`_

SET_STATS_REQUIREMENTS:
Sets which stats data needs to be streamed to the frontend when the region is updated

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the requirements describe
   * - region_id
     - sfixed32
     - 
     - ID of the region that is having requirements defined. If a region ID of -1 is given, this corresponds to the entire 2D image.
   * - stats
     - StatsType
     - repeated
     - List of required stats

.. _registerviewer:

RegisterViewer
^^^^^^^^^^^^^^

Source file: `register_viewer.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/register_viewer.proto>`_

REGISTER_VIEWER:
Registers the viewer with the backend.
Responds with :carta:`REGISTER_VIEWER_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - session_id
     - fixed32
     - 
     - Unique session ID parameter (can be generated using UUID libraries). Passing in an existing session ID can be used for resuming sessions
   * - api_key
     - string
     - 
     - Optional user-specific API key to be used for basic authentication. Could be an encrypted JWT for secure authentication.
   * - client_feature_flags
     - fixed32
     - 
     - Optional feature bitflag specifying client-side feature set

.. _registerviewerack:

RegisterViewerAck
^^^^^^^^^^^^^^^^^

Source file: `register_viewer.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/register_viewer.proto>`_

REGISTER_VIEWER_ACK
Acknowledgement response for :carta:`REGISTER_VIEWER`.
Informs the frontend whether the session was correctly.

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - session_id
     - fixed32
     - 
     - Unique session ID
   * - success
     - bool
     - 
     - Defines whether the :carta:`REGISTER_VIEWER` command was successful
   * - message
     - string
     - 
     - Error message (if applicable)
   * - session_type
     - SessionType
     - 
     - Defines the type of session established
   * - server_feature_flags
     - fixed32
     - 
     - Optional feature bitflag specifying server-side feature set
   * - user_preferences
     - map<key: string, value: string>
     - repeated
     - Map of user preferences retrieved from the server database. If this is empty and the server does not have the USER_PREFERENCES feature flag set, then the user preferences are read from localStorage instead.
   * - user_layouts
     - map<key: string, value: string>
     - repeated
     - Map of user layouts retrieved from the server database

.. _imageproperties:

ImageProperties
^^^^^^^^^^^^^^^

Source file: `resume_session.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/resume_session.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - directory
     - string
     - 
     - 
   * - file
     - string
     - 
     - 
   * - hdu
     - string
     - 
     - 
   * - file_id
     - sfixed32
     - 
     - 
   * - render_mode
     - RenderMode
     - 
     - 
   * - channel
     - sfixed32
     - 
     - 
   * - stokes
     - sfixed32
     - 
     - 
   * - regions
     - map<key: sfixed32, value: :carta:`RegionInfo`>
     - repeated
     - 
   * - contour_settings
     - :carta:`SetContourParameters`
     - 
     - 

.. _resumesession:

ResumeSession
^^^^^^^^^^^^^

Source file: `resume_session.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/resume_session.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - images
     - :carta:`ImageProperties`
     - repeated
     - 
   * - catalog_files
     - :carta:`OpenCatalogFile`
     - repeated
     - 

.. _resumesessionack:

ResumeSessionAck
^^^^^^^^^^^^^^^^

Source file: `resume_session.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/resume_session.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - 
   * - message
     - string
     - 
     - 

.. _setcursor:

SetCursor
^^^^^^^^^

Source file: `set_cursor.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/set_cursor.proto>`_

SET_CURSOR:
Sets the current cursor position in image space coordinates.
The cursor defines a special case of a region, with a single control point.

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Which file slot the cursor is moving over
   * - point
     - :carta:`Point`
     - 
     - XY-coordinates of cursor in image space
   * - spatial_requirements
     - :carta:`SetSpatialRequirements`
     - 
     - Optional accompanying spatial requirements message to be processed prior to cursor update

.. _setimagechannels:

SetImageChannels
^^^^^^^^^^^^^^^^

Source file: `set_image_channels.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/set_image_channels.proto>`_

SET_IMAGE_CHANNELS
Sets the current image channel and Stokes parameter

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - The file ID that the view corresponds to
   * - channel
     - sfixed32
     - 
     - The image channel (Z-coordinate)
   * - stokes
     - sfixed32
     - 
     - The image stokes parameter
   * - required_tiles
     - :carta:`AddRequiredTiles`
     - 
     - Required tiles when changing channels

.. _spectrallinerequest:

SpectralLineRequest
^^^^^^^^^^^^^^^^^^^

Source file: `spectral_line_request.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/spectral_line_request.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - frequency_range
     - :carta:`DoubleBounds`
     - 
     - 
   * - line_intensity_lower_limit
     - double
     - 
     - 

.. _spectrallineresponse:

SpectralLineResponse
^^^^^^^^^^^^^^^^^^^^

Source file: `spectral_line_request.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/spectral_line_request.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - 
   * - message
     - string
     - 
     - 
   * - data_size
     - sfixed32
     - 
     - 
   * - headers
     - :carta:`CatalogHeader`
     - repeated
     - 
   * - spectral_line_data
     - map<key: fixed32, value: :carta:`ColumnData`>
     - repeated
     - 

.. _stopmomentcalc:

StopMomentCalc
^^^^^^^^^^^^^^

Source file: `stop_moment_calc.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/stop_moment_calc.proto>`_



.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - Stop the moment calculation with respect to the image file id

.. _addrequiredtiles:

AddRequiredTiles
^^^^^^^^^^^^^^^^

Source file: `tiles.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/tiles.proto>`_

ADD_REQUIRED_TILES
Provides a list of tiles that are required for the specified file

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - The file ID that the view corresponds to
   * - tiles
     - sfixed32
     - repeated
     - The list of tiles required, in encoded coordinate
   * - compression_type
     - CompressionType
     - 
     - The compression algorithm used
   * - compression_quality
     - float
     - 
     - Compression quality switch

.. _removerequiredtiles:

RemoveRequiredTiles
^^^^^^^^^^^^^^^^^^^

Source file: `tiles.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/tiles.proto>`_

REMOVE_REQUIRED_TILES
Provides a list of tiles that are required for the specified file

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - file_id
     - sfixed32
     - 
     - The file ID that the view corresponds to
   * - tiles
     - sfixed32
     - repeated
     - The list of tiles required, in encoded coordinate

.. _setuserlayout:

SetUserLayout
^^^^^^^^^^^^^

Source file: `user_layout.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/user_layout.proto>`_

SET_USER_LAYOUT:
Sets or clears a user layout.
Backend responds with  :carta:`SET_USER_LAYOUT_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - name
     - string
     - 
     - Name of the layout to update. If no layout with the given name is present in the server database, a new layout is created
   * - value
     - string
     - 
     - JSON string representing the layout. If the value is empty, the user layout is cleared from the server database.

.. _setuserlayoutack:

SetUserLayoutAck
^^^^^^^^^^^^^^^^

Source file: `user_layout.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/user_layout.proto>`_

SET_USER_LAYOUT_ACK
Response for :carta:`SET_USER_LAYOUT`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`SET_USER_LAYOUT` was successful  Error message (if applicable)

.. _setuserpreferences:

SetUserPreferences
^^^^^^^^^^^^^^^^^^

Source file: `user_preferences.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/user_preferences.proto>`_

SET_USER_PREFERENCES:
Sets or clears one or more user preferences.
Backend responds with  :carta:`SET_USER_PREFERENCES_ACK`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - preference_map
     - map<key: string, value: string>
     - repeated
     - 

.. _setuserpreferencesack:

SetUserPreferencesAck
^^^^^^^^^^^^^^^^^^^^^

Source file: `user_preferences.proto <https://github.com/CARTAvis/carta-protobuf/blob/dev/control/user_preferences.proto>`_

SET_USER_PREFERENCES_ACK
Response for :carta:`SET_USER_PREFERENCES`

.. list-table::
   :widths: 25 25 10 40
   :header-rows: 1

   * - Field
     - Type
     - Label
     - Description
   * - success
     - bool
     - 
     - Defines whether :carta:`SET_USER_PREFERENCES` was successful  Error message (if applicable)

